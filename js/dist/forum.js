(()=>{var t={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},d:(e,o)=>{for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const o=flarum.core.compat.app;var a=t.n(o);const r=flarum.core.compat["models/User"];var n=t.n(r);const i=flarum.core.compat.Model;var s=t.n(i);const l=flarum.core.compat.extend,u=flarum.core.compat["components/LogInButtons"];var c=t.n(u);const f=flarum.core.compat["components/NotificationGrid"];var d=t.n(f);const g=flarum.core.compat["components/SettingsPage"];var p=t.n(g);a().initializers.add("nikovonlas-tg-notify",(function(){n().prototype.canReceiveTelegramNotifications=s().attribute("canReceiveTelegramNotifications"),n().prototype.nodelocTelegramError=s().attribute("nodelocTelegramError"),(0,l.extend)(c().prototype,"items",(function(t){if(a().forum.attribute("nikovonlas-tg-notify.enableWidget")){var e=a().forum.attribute("baseUrl")+"/auth/telegram",o=a().forum.attribute("nikovonlas-tg-notify.addWidget"),r=a().forum.attribute("nikovonlas-tg-notify.widgetSize"),n=a().forum.attribute("nikovonlas-tg-notify.widgetRadius"),i=a().forum.attribute("nikovonlas-tg-notify.widgetUserPic");t.add("nikovonlas-tg-notify",m("script",{async:!0,src:"https://telegram.org/js/telegram-widget.js?22","data-telegram-login":o,"data-size":r,"data-radius":n,"data-userpic":i,"data-auth-url":e,"data-request-access":"write"}))}})),(0,l.extend)(d().prototype,"notificationMethods",(function(t){if(a().forum.attribute("nikovonlas-tg-notify.enableNotifications")&&a().session&&a().session.user){var e=a().session.user;e&&e.canReceiveTelegramNotifications()&&t.add("telegram",{name:"telegram",icon:"fab fa-telegram-plane",label:a().translator.trans("nikovonlas-tg-notify.forum.settings.notify_by_telegram_heading")})}})),(0,l.extend)(p().prototype,"accountItems",(function(t){if(a().forum.attribute("nikovonlas-tg-notify.enableNotifications")&&a().session&&a().session.user){var e=a().session.user;if(e&&!e.canReceiveTelegramNotifications()){var o=a().forum.attribute("baseUrl")+"/auth/telegram",r=a().forum.attribute("nikovonlas-tg-notify.botUsername");t.add("nikovonlas-tg-notify",m("script",{async:!0,src:"https://telegram.org/js/telegram-widget.js?22","data-telegram-login":r,"data-size":"large","data-radius":"10","data-auth-url":o,"data-request-access":"write"}))}}})),(0,l.extend)(p().prototype,"notificationsItems",(function(t){if(a().forum.attribute("nikovonlas-tg-notify.enableNotifications")&&a().session&&a().session.user){var e=a().session.user;if(e&&e.nodelocTelegramError()){var o=a().forum.attribute("nikovonlas-tg-notify.botUsername");t.add("nodelocTelegramError",{view:function(){return m(".Alert",m("p",a().translator.trans("nikovonlas-tg-notify.forum.settings.unblock_telegram_bot",{a:m("a",{href:"https://t.me/"+o}),username:"@"+o})))}})}}}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map