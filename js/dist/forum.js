(()=>{var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t);const o=flarum.core.compat.app;var r=e.n(o);const a=flarum.core.compat["models/User"];var n=e.n(a);const i=flarum.core.compat.Model;var l=e.n(i);const c=flarum.core.compat.extend,s=flarum.core.compat["components/LogInButtons"];var u=e.n(s);const d=flarum.core.compat["components/NotificationGrid"];var g=e.n(d);const f=flarum.core.compat["components/SettingsPage"];var p=e.n(f);const b=flarum.core.compat["components/LogInButton"];var v=e.n(b);r().initializers.add("nodeloc-telegram",(function(){n().prototype.canReceiveTelegramNotifications=l().attribute("canReceiveTelegramNotifications"),n().prototype.nodelocTelegramError=l().attribute("nodelocTelegramError"),(0,c.extend)(u().prototype,"items",(function(e){User.prototype.canReceiveTelegramNotifications=r().session.user.attribute("canReceiveTelegramNotifications"),User.prototype.nodelocTelegramError=r().session.user.attribute("nodelocTelegramError");var t=r().forum.attribute("baseUrl")+"/auth/telegram";e.add("nodeloc-telegram",m("script",{async:!0,src:"https://telegram.org/js/telegram-widget.js?22","data-telegram-login":"nodeloc_bot","data-size":"large","data-radius":"10","data-auth-url":t,"data-request-access":"write"}))})),(0,c.extend)(g().prototype,"notificationMethods",(function(e){if(r().forum.attribute("nodeloc-telegram.enableNotifications")){var t=r().session.user;t&&t.canReceiveTelegramNotifications()&&e.add("telegram",{name:"telegram",icon:"fab fa-telegram-plane",label:r().translator.trans("nodeloc-telegram.forum.settings.notify_by_telegram_heading")})}})),(0,c.extend)(p().prototype,"accountItems",(function(e){if(r().forum.attribute("nodeloc-telegram.enableNotifications")){var t=r().session.user;t&&!t.canReceiveTelegramNotifications()&&e.add("nodeloc-telegram",m("div",null,m(v(),{className:"Button LogInButton--telegram",style:"display:inline-block; width:auto",icon:"fab fa-telegram-plane",path:"/auth/telegram"},r().translator.trans("nodeloc-telegram.forum.link_telegram_button"))))}})),(0,c.extend)(p().prototype,"notificationsItems",(function(e){if(r().forum.attribute("nodeloc-telegram.enableNotifications")){var t=r().session.user;if(t&&t.nodelocTelegramError()){var o=r().forum.attribute("nodeloc-telegram.botUsername");e.add("nodelocTelegramError",{view:function(){return m(".Alert",m("p",r().translator.trans("nodeloc-telegram.forum.settings.unblock_telegram_bot",{a:m("a",{href:"https://t.me/"+o}),username:"@"+o})))}})}}}))}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map