(()=>{var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var a in o)e.o(o,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:o[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t);const o=flarum.core.compat.app;var a=e.n(o);const r=flarum.core.compat["models/User"];var n=e.n(r);const s=flarum.core.compat.Model;var i=e.n(s);const l=flarum.core.compat.extend,c=flarum.core.compat["components/LogInButtons"];var u=e.n(c);const d=flarum.core.compat["components/NotificationGrid"];var f=e.n(d);const g=flarum.core.compat["components/SettingsPage"];var p=e.n(g);const b=flarum.core.compat["components/LogInButton"];var v=e.n(b);a().initializers.add("nodeloc-telegram",(function(){n().prototype.canReceiveTelegramNotifications=i().attribute("canReceiveTelegramNotifications"),n().prototype.nodelocTelegramError=i().attribute("nodelocTelegramError"),(0,l.extend)(u().prototype,"items",(function(e){var t=a().forum.attribute("baseUrl")+"/auth/telegram";e.add("nodeloc-telegram",m("script",{async:!0,src:"https://telegram.org/js/telegram-widget.js?22","data-telegram-login":"nodeloc_bot","data-size":"large","data-radius":"10","data-auth-url":t,"data-request-access":"write"}))})),(0,l.extend)(f().prototype,"notificationMethods",(function(e){if(a().forum.attribute("nodeloc-telegram.enableNotifications")&&a().session&&a().session.user){var t=a().session.user;t&&t.canReceiveTelegramNotifications()&&e.add("telegram",{name:"telegram",icon:"fab fa-telegram-plane",label:a().translator.trans("nodeloc-telegram.forum.settings.notify_by_telegram_heading")})}})),(0,l.extend)(p().prototype,"accountItems",(function(e){if(a().forum.attribute("nodeloc-telegram.enableNotifications")&&a().session&&a().session.user){var t=a().session.user;t&&!t.canReceiveTelegramNotifications()&&e.add("nodeloc-telegram",m("div",null,m(v(),{className:"Button LogInButton--telegram",style:"display:inline-block; width:auto",icon:"fab fa-telegram-plane",path:"/auth/telegram"},a().translator.trans("nodeloc-telegram.forum.link_telegram_button"))))}})),(0,l.extend)(p().prototype,"notificationsItems",(function(e){if(a().forum.attribute("nodeloc-telegram.enableNotifications")&&a().session&&a().session.user){var t=a().session.user;if(t&&t.nodelocTelegramError()){var o=a().forum.attribute("nodeloc-telegram.botUsername");e.add("nodelocTelegramError",{view:function(){return m(".Alert",m("p",a().translator.trans("nodeloc-telegram.forum.settings.unblock_telegram_bot",{a:m("a",{href:"https://t.me/"+o}),username:"@"+o})))}})}}}))}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map